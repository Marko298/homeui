<div class="web-ui-manage">
    <div class="list" ng-show="!$ctrl.editable">
        <div class="table-responsive">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>{{'webUI.manager.table.header.name' | translate}}</th>
                        <th>{{'webUI.manager.table.header.host' | translate}}</th>
                        <th>{{'webUI.manager.table.header.port' | translate}}</th>
                        <th>{{'webUI.manager.table.header.user' | translate}}</th>
                        <th>{{'webUI.manager.table.header.prefix' | translate}}</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="account in $ctrl.accounts track by $index">
                        <td>{{ account.name }}</td>
                        <td>{{ account.host }}</td>
                        <td>{{ account.port }}</td>
                        <td>{{ account.user }}</td>
                        <td width="100"><i class="fa fa-check" ng-show="account.prefix"></i></td>
                        <td width="200" class="text-center">
                            <button class="btn btn-sm btn-primary" ng-click="$ctrl.update(account)">{{'webUI.manager.button.edit' | translate}}</button>
                            <button class="btn btn-sm btn-success" 
                                ng-click="$ctrl.login(account)" 
                                ng-disabled="account === $ctrl.current">{{'webUI.manager.button.login' | translate}}</button>
                            <button 
                                class="btn btn-sm btn-danger" 
                                ng-click="$ctrl.remove(account)" 
                                >{{'webUI.manager.button.remove' | translate}}</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div>
            <button class="btn btn-primary" ng-click="$ctrl.create()">{{'webUI.manager.button.add' | translate}}</button>
        </div>
    </div>
    <div class="edit" ng-if="$ctrl.editable">
        <form name="account" novalidate autocomplete="off">
            <div class="form-group">
                <div class="form-group" ng-class="{'has-error': account.name.$invalid, 'has-success': !account.name.$invalid && account.name.$touched}">
                    <label for="host" class="control-label">{{'webUI.manager.field.name' | translate}}</label>
                    <input type="text" class="form-control" id="name" name="name" ng-model="$ctrl.editable.name" />
                    <div class="help-block with-errors" ng-show="account.name.$error.required">{{'webUI.manager.error.name.empty' | translate}}</div>
                </div>
                <div class="form-group required" ng-class="{'has-error': account.host.$invalid, 'has-success': !account.host.$invalid && account.host.$touched}">
                    <label for="host" class="control-label">{{'webUI.manager.field.host' | translate}}</label>
                    <input type="text" class="form-control" id="host" name="host" ng-model="$ctrl.editable.host" ng-required="account.host.$touched" />
                    <div class="help-block with-errors" ng-show="account.host.$error.required">{{'webUI.manager.error.host.empty' | translate}}</div>
                </div>
                <div class="form-group required" ng-class="{'has-error': account.port.$invalid, 'has-success': !account.port.$invalid && account.port.$touched}">
                    <label for="port" class="control-label">{{'webUI.manager.field.port' | translate}}</label>
                    <input type="number" maxlength="5" class="form-control" id="port" name="port" ng-model="$ctrl.editable.port" ng-required="account.port.$touched" />
                    <div class="help-block with-errors" ng-show="account.port.$error.required">{{'webUI.manager.error.port.empty' | translate}}</div>
                    <div class="help-block with-errors" ng-show="account.port.$error.number">{{'webUI.manager.error.port.invalid' | translate}}</div>
                </div>
                <div class="form-group">
                    <label for="credentials" class="control-label">
                        <input type="checkbox" id="credentials" name="credentials" ng-model="$ctrl.editable.credentials" />
                        {{'webUI.manager.field.credentials' | translate}}
                    </label>
                </div>
                <div ng-show="$ctrl.editable.credentials">
                    <div class="form-group" ng-class="{'required': $ctrl.editable.credentials, 'has-error': account.user.$invalid, 'has-success': !account.user.$invalid && account.user.$touched}">
                        <label for="host" class="control-label">{{'webUI.manager.field.user' | translate}}</label>
                        <input type="text" class="form-control" id="user" name="user" autocomplete="off" ng-model="$ctrl.editable.user" ng-required="$ctrl.editable.credentials && account.user.$touched" />
                        <div class="help-block with-errors" ng-show="account.user.$error.required">{{'webUI.manager.error.user.empty' | translate}}</div>
                    </div>
                    <div class="form-group" ng-class="{'required': $ctrl.editable.credentials, 'has-error': account.password.$invalid, 'has-success': !account.password.$invalid && account.password.$touched}">
                        <label for="password" class="control-label">{{'webUI.manager.field.password' | translate}}</label>
                        <input type="password" class="form-control" id="password" name="password" autocomplete="new-password" ng-model="$ctrl.editable.password" ng-required="$ctrl.editable.credentials && account.password.$touched" />
                        <div class="help-block with-errors" ng-show="account.password.$error.required">{{'webUI.manager.error.password.empty' | translate}}</div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="prefix" class="control-label">
                        <input type="checkbox" id="prefix" name="prefix" ng-model="$ctrl.editable.prefix" />
                        {{'webUI.manager.field.prefix' | translate}}
                    </label>
                </div>
            </div>
        </form>
        <div class="form-group">
            <button class="btn btn-primary" ng-click="$ctrl.save()">{{'webUI.manager.button.save' | translate}}</button>
            <button class="btn btn-default" ng-click="$ctrl.cancel()" ng-if="$ctrl.isMultiple">{{'webUI.manager.button.cancel' | translate}}</button>
        </div>
    </div>
</div>